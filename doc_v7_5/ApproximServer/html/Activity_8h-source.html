<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Approxsim: Activity.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>Activity.h</h1><div class="fragment"><pre>00001 <span class="preprocessor">#ifndef APPROXSIM_ACTIVITY_H</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define APPROXSIM_ACTIVITY_H</span>
00003 <span class="preprocessor"></span>
00004 
00005 <span class="comment">// System</span>
00006 <span class="preprocessor">#include &lt;iosfwd&gt;</span>
00007 <span class="preprocessor">#include &lt;map&gt;</span>
00008 <span class="preprocessor">#include &lt;vector&gt;</span>
00009 
00010 <span class="comment">// Own</span>
00011 <span class="preprocessor">#include "GridEffect.h"</span>
00012 <span class="preprocessor">#include "ProcessVariables.h"</span>
00013 <span class="preprocessor">#include "Time.h"</span>
00014 <span class="preprocessor">#include "UpdatableSOAdapter.h"</span>
00015 
00016 <span class="comment">// Forward Declarations</span>
00017 <span class="keyword">class </span><a class="code" href="classBuffer.html">Buffer</a>;
00018 <span class="keyword">class </span><a class="code" href="classDataObject.html">DataObject</a>;
00019 <span class="keyword">class </span><a class="code" href="classElement.html">Element</a>;
00020 <span class="keyword">class </span><a class="code" href="classFaction.html">Faction</a>;
00021 <span class="keyword">class </span><a class="code" href="classGrid.html">Grid</a>;
00022 <span class="keyword">class </span><a class="code" href="classShape.html">Shape</a>;
00023 <span class="keyword">class </span><a class="code" href="classUnit.html">Unit</a>;
00024 <span class="keyword">class </span><a class="code" href="classUpdate.html">Update</a>;
00025 
00026 
<a name="l00033"></a><a class="code" href="classActivity.html">00033</a> <span class="keyword">class </span><a class="code" href="classActivity.html">Activity</a> : <span class="keyword">public</span> <a class="code" href="classUpdatableSOAdapter.html">UpdatableSOAdapter</a> {
00034 <span class="keyword">protected</span>:
<a name="l00035"></a><a class="code" href="classActivity.html#p0">00035</a>      <span class="keywordtype">bool</span> <a class="code" href="classActivity.html#p0">mActive</a>;  
<a name="l00036"></a><a class="code" href="classActivity.html#p1">00036</a>      <a class="code" href="classTime.html">Time</a> <a class="code" href="classActivity.html#p1">mStart</a>;   
00037 
00038 <span class="keyword">public</span>:
00039      <a class="code" href="classActivity.html#a0">Activity</a>();
00040      <a class="code" href="classActivity.html#a0">Activity</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d);
00041 
<a name="l00045"></a><a class="code" href="classActivity.html#a2">00045</a>      <span class="keyword">virtual</span> <a class="code" href="classActivity.html#a2">~Activity</a>() {}
00046 
00047      <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classActivity.html#a3">prepareForSimulation</a>(<a class="code" href="classGrid.html">Grid</a>&amp; g, <a class="code" href="classTime.html">Time</a> currentTime);
00048      
00049      <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classActivity.html#a4">extract</a>(<a class="code" href="classBuffer.html">Buffer</a>&amp; b) <span class="keyword">const</span>;
00050      <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classActivity.html#a5">modify</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d);
00051      <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classActivity.html#a6">reset</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d);
00052 
<a name="l00058"></a><a class="code" href="classActivity.html#a7">00058</a>      <a class="code" href="classTime.html">Time</a> <a class="code" href="classActivity.html#a7">startTime</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classActivity.html#p1">mStart</a>; }
00059 
00066      <span class="keyword">virtual</span> <a class="code" href="classShape.html">Shape</a>* <a class="code" href="classActivity.html#a8">location</a>() <span class="keyword">const</span> = 0;
00067 
00074      <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classActivity.html#a9">isActive</a>(<a class="code" href="classTime.html">Time</a> t) = 0;
00075 
00083      <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classActivity.html#a10">perform</a>(<a class="code" href="classElement.html">Element</a>* e, <span class="keywordtype">double</span> fraction = 1.0) = 0;
00084 };
00085 
<a name="l00096"></a><a class="code" href="structlessActivityPointer.html">00096</a> <span class="keyword">struct </span><a class="code" href="structlessActivityPointer.html">lessActivityPointer</a> {
<a name="l00105"></a><a class="code" href="structlessActivityPointer.html#a0">00105</a>      <span class="keywordtype">bool</span> <a class="code" href="structlessActivityPointer.html#a0">operator()</a>(<span class="keyword">const</span> <a class="code" href="classActivity.html">Activity</a>* <span class="keyword">const</span> a1, <span class="keyword">const</span> <a class="code" href="classActivity.html">Activity</a>* <span class="keyword">const</span> a2)<span class="keyword"> const </span>{
00106           <span class="keywordflow">if</span> (!a1 || !a2) {
00107                <span class="keywordflow">return</span> <span class="keyword">false</span>;
00108           }
00109           <span class="keywordflow">else</span> {
00110                <span class="keywordflow">return</span> (a1-&gt;<a class="code" href="classActivity.html#a7">startTime</a>() &lt; a2-&gt;<a class="code" href="classActivity.html#a7">startTime</a>());
00111           }
00112      }
00113 };
00114 
00115 
<a name="l00122"></a><a class="code" href="classOrder.html">00122</a> <span class="keyword">class </span><a class="code" href="classOrder.html">Order</a> : <span class="keyword">public</span> <a class="code" href="classActivity.html">Activity</a> {
00123 <span class="keyword">protected</span>:
<a name="l00124"></a><a class="code" href="classOrder.html#p0">00124</a>      <span class="keywordtype">bool</span> <a class="code" href="classOrder.html#p0">mCarriedOut</a>;  
<a name="l00125"></a><a class="code" href="classOrder.html#p1">00125</a>      <a class="code" href="classShape.html">Shape</a>* <a class="code" href="classOrder.html#p1">mLocation</a>;  
00126 
00127 <span class="keyword">public</span>:
<a name="l00129"></a><a class="code" href="classOrder.html#a0">00129</a>      <a class="code" href="classOrder.html#a0">Order</a>() : <a class="code" href="classOrder.html#p0">mCarriedOut</a>(false), <a class="code" href="classOrder.html#p1">mLocation</a>(0) {}
00130 
00136      <a class="code" href="classOrder.html#a0">Order</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d);
00137      <span class="keyword">virtual</span> <a class="code" href="classOrder.html#a2">~Order</a>();
00138 
<a name="l00145"></a><a class="code" href="classOrder.html#a3">00145</a>      <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classOrder.html#a3">isActive</a>(<a class="code" href="classTime.html">Time</a> t) { <span class="keywordflow">return</span> <a class="code" href="classActivity.html#p0">mActive</a> = (t &gt; <a class="code" href="classActivity.html#p1">mStart</a> &amp;&amp; !<a class="code" href="classOrder.html#a5">isCarriedOut</a>()); }
00146 
<a name="l00153"></a><a class="code" href="classOrder.html#a4">00153</a>      <a class="code" href="classShape.html">Shape</a>* <a class="code" href="classOrder.html#a4">location</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classOrder.html#p1">mLocation</a>; }
00154 
<a name="l00160"></a><a class="code" href="classOrder.html#a5">00160</a>      <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classOrder.html#a5">isCarriedOut</a>() { <span class="keywordflow">return</span> <a class="code" href="classOrder.html#p0">mCarriedOut</a>; }
00161 
00162      <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classOrder.html#a6">extract</a>(<a class="code" href="classBuffer.html">Buffer</a>&amp; b) <span class="keyword">const</span>;
00163      <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classOrder.html#a7">addObject</a>(<a class="code" href="classDataObject.html">DataObject</a>&amp; toAdd, int64_t initiator);
00164      <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classOrder.html#a8">removeObject</a>(<span class="keyword">const</span> <a class="code" href="classReference.html">Reference</a>&amp; toRemove, int64_t initiator);
00165      <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classOrder.html#a9">replaceObject</a>(<a class="code" href="classDataObject.html">DataObject</a>&amp; newObject, int64_t initiator);
00166      <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classOrder.html#a10">modify</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d);
00167      <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classOrder.html#a11">reset</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d);
00168 
00174      <span class="keyword">virtual</span> <span class="keywordtype">double</span> <a class="code" href="classOrder.html#a12">combatFactor</a>() <span class="keyword">const</span> = 0;
00175 };
00176 
00177 
<a name="l00184"></a><a class="code" href="classCustomPVModification.html">00184</a> <span class="keyword">class </span><a class="code" href="classCustomPVModification.html">CustomPVModification</a> : <span class="keyword">public</span> <a class="code" href="classOrder.html">Order</a> {
00185 <span class="keyword">protected</span>:
<a name="l00186"></a><a class="code" href="classCustomPVModification.html#p0">00186</a>      <a class="code" href="classGrid.html">Grid</a>*                   <a class="code" href="classCustomPVModification.html#p0">mGrid</a>;     
<a name="l00187"></a><a class="code" href="classCustomPVModification.html#p1">00187</a>      <a class="code" href="classTime.html">Time</a>                    <a class="code" href="classCustomPVModification.html#p1">mEnd</a>;      
<a name="l00188"></a><a class="code" href="classCustomPVModification.html#p2">00188</a>      <span class="keyword">const</span> <a class="code" href="classReference.html">Reference</a>*        <a class="code" href="classCustomPVModification.html#p2">mTarget</a>;   
<a name="l00189"></a><a class="code" href="classCustomPVModification.html#p3">00189</a>      std::vector&lt;GridEffect&gt; <a class="code" href="classCustomPVModification.html#p3">mEffects</a>;  
00190 
<a name="l00192"></a><a class="code" href="classCustomPVModification.html#p4">00192</a>      std::string <a class="code" href="classCustomPVModification.html#p4">mType</a>;
00193 
<a name="l00195"></a><a class="code" href="classCustomPVModification.html#p5">00195</a>      <span class="keywordtype">double</span> <a class="code" href="classCustomPVModification.html#p5">mCombatFactor</a>;
00196 
<a name="l00198"></a><a class="code" href="classCustomPVModification.html#p6">00198</a>      std::map&lt;std::string, double&gt; <a class="code" href="classCustomPVModification.html#p6">mSeverities</a>;
00199 <span class="keyword">public</span>:
00200      <a class="code" href="classCustomPVModification.html#a0">CustomPVModification</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d);
00201      <span class="keyword">virtual</span> ~<a class="code" href="classCustomPVModification.html">CustomPVModification</a>() {}
00202 
00203      <span class="keywordtype">void</span> <a class="code" href="classCustomPVModification.html#a2">prepareForSimulation</a>(<a class="code" href="classGrid.html">Grid</a>&amp; g, <a class="code" href="classTime.html">Time</a> currentTime);
00204      <span class="keywordtype">void</span> <a class="code" href="classCustomPVModification.html#a3">createEffects</a>();
00205 
00206      <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classCustomPVModification.html#a4">extract</a>(<a class="code" href="classBuffer.html">Buffer</a>&amp; b) <span class="keyword">const</span>;
00207      <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classCustomPVModification.html#a5">addObject</a>(<a class="code" href="classDataObject.html">DataObject</a>&amp; toAdd, int64_t initiator);
00208      <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classCustomPVModification.html#a6">removeObject</a>(<span class="keyword">const</span> <a class="code" href="classReference.html">Reference</a>&amp; toRemove, int64_t initiator);
00209      <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classCustomPVModification.html#a7">modify</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d);
00210      <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classCustomPVModification.html#a8">reset</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d);
00211 
<a name="l00217"></a><a class="code" href="classCustomPVModification.html#a9">00217</a>      <a class="code" href="classTime.html">Time</a> <a class="code" href="classCustomPVModification.html#a9">endTime</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCustomPVModification.html#p1">mEnd</a>; }
00218 
<a name="l00225"></a><a class="code" href="classCustomPVModification.html#a10">00225</a>      <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classCustomPVModification.html#a10">isActive</a>(<a class="code" href="classTime.html">Time</a> t) { <a class="code" href="classOrder.html#p0">mCarriedOut</a> = (t &gt; <a class="code" href="classCustomPVModification.html#p1">mEnd</a>); <span class="keywordflow">return</span> <a class="code" href="classActivity.html#p0">mActive</a> = (t &gt; <a class="code" href="classActivity.html#p1">mStart</a> &amp;&amp; t &lt;= <a class="code" href="classCustomPVModification.html#p1">mEnd</a>); }
00226 
<a name="l00234"></a><a class="code" href="classCustomPVModification.html#a11">00234</a>      <span class="keywordtype">void</span> <a class="code" href="classCustomPVModification.html#a11">addEffect</a>(eAllPV a, <span class="keywordtype">double</span> si, <a class="code" href="classEthnicFaction.html">EthnicFaction</a>* f) { <a class="code" href="classCustomPVModification.html#p3">mEffects</a>.push_back(<a class="code" href="classGridEffect.html">GridEffect</a>(a, si, f)); }
00235 
00243      <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classCustomPVModification.html#a12">perform</a>(<a class="code" href="classElement.html">Element</a>* e, <span class="keywordtype">double</span> fraction = 1.0);
00244 
<a name="l00245"></a><a class="code" href="classCustomPVModification.html#a13">00245</a>      <span class="keyword">virtual</span> <span class="keywordtype">double</span> <a class="code" href="classCustomPVModification.html#a13">combatFactor</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classCustomPVModification.html#p5">mCombatFactor</a>; }
00246 
00247      <span class="comment">// Friends</span>
00248      <span class="keyword">friend</span> std::ostream &amp;<a class="code" href="classCustomPVModification.html#a0">operator &lt;&lt; </a>(std::ostream&amp; o, <span class="keyword">const</span> <a class="code" href="classCustomPVModification.html">CustomPVModification</a>&amp; a);
00249 };
00250 
00251 
<a name="l00258"></a><a class="code" href="classTerroristAttackOrder.html">00258</a> <span class="keyword">class </span><a class="code" href="classTerroristAttackOrder.html">TerroristAttackOrder</a> : <span class="keyword">public</span> <a class="code" href="classCustomPVModification.html">CustomPVModification</a> {
00259 <span class="keyword">private</span>:
<a name="l00261"></a><a class="code" href="classTerroristAttackOrder.html#r0">00261</a>      <a class="code" href="classTime.html">Time</a> <a class="code" href="classTerroristAttackOrder.html#r0">mActionTime</a>;
00262 
<a name="l00264"></a><a class="code" href="classTerroristAttackOrder.html#r1">00264</a>      <span class="keywordtype">bool</span> <a class="code" href="classTerroristAttackOrder.html#r1">mTimeToPerform</a>;
00265 
<a name="l00267"></a><a class="code" href="classTerroristAttackOrder.html#r2">00267</a>      <span class="keywordtype">bool</span> <a class="code" href="classTerroristAttackOrder.html#r2">mAttackPerformed</a>;
00268 <span class="keyword">public</span>:
00269      <a class="code" href="classTerroristAttackOrder.html#a0">TerroristAttackOrder</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d);
00270 
<a name="l00276"></a><a class="code" href="classTerroristAttackOrder.html#a1">00276</a>      <a class="code" href="classTime.html">Time</a> <a class="code" href="classTerroristAttackOrder.html#a1">actionTime</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classTerroristAttackOrder.html#r0">mActionTime</a>; }
00277 
<a name="l00284"></a><a class="code" href="classTerroristAttackOrder.html#a2">00284</a>      <span class="keywordtype">bool</span> <a class="code" href="classTerroristAttackOrder.html#a2">isActive</a>(<a class="code" href="classTime.html">Time</a> t) { <a class="code" href="classTerroristAttackOrder.html#r1">mTimeToPerform</a> = (t &gt; <a class="code" href="classTerroristAttackOrder.html#a1">actionTime</a>()); <span class="keywordflow">return</span> <a class="code" href="classCustomPVModification.html#a10">CustomPVModification::isActive</a>(t); }
00285 
00286      <span class="keywordtype">void</span> <a class="code" href="classTerroristAttackOrder.html#a3">extract</a>(<a class="code" href="classBuffer.html">Buffer</a> &amp;b) <span class="keyword">const</span>;
00287      <span class="keywordtype">void</span> <a class="code" href="classTerroristAttackOrder.html#a4">modify</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d);
00288      <span class="keywordtype">void</span> <a class="code" href="classTerroristAttackOrder.html#a5">reset</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d);
00289      <span class="keywordtype">void</span> <a class="code" href="classTerroristAttackOrder.html#a6">perform</a>(<a class="code" href="classElement.html">Element</a>* e, <span class="keywordtype">double</span> fraction = 1.0);
00290 };
00291 
00292 
00293 
<a name="l00300"></a><a class="code" href="classAttackOrder.html">00300</a> <span class="keyword">class </span><a class="code" href="classAttackOrder.html">AttackOrder</a> : <span class="keyword">public</span> <a class="code" href="classOrder.html">Order</a> {
00301 <span class="keyword">public</span>:
<a name="l00303"></a><a class="code" href="classAttackOrder.html#a0">00303</a>      <a class="code" href="classAttackOrder.html#a0">AttackOrder</a>() {}
00304 
<a name="l00310"></a><a class="code" href="classAttackOrder.html#a1">00310</a>      <a class="code" href="classAttackOrder.html#a0">AttackOrder</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d) : <a class="code" href="classOrder.html">Order</a>(d) {}
00311 
00312      <span class="keywordtype">void</span> <a class="code" href="classAttackOrder.html#a2">perform</a>(<a class="code" href="classElement.html">Element</a>* e, <span class="keywordtype">double</span> fraction = 1.0);
<a name="l00313"></a><a class="code" href="classAttackOrder.html#a3">00313</a>      <span class="keywordtype">double</span> <a class="code" href="classAttackOrder.html#a3">combatFactor</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> 1; }
00314 };
00315 
00316 
<a name="l00323"></a><a class="code" href="classDefendOrder.html">00323</a> <span class="keyword">class </span><a class="code" href="classDefendOrder.html">DefendOrder</a> : <span class="keyword">public</span> <a class="code" href="classOrder.html">Order</a> {
00324 <span class="keyword">protected</span>:
<a name="l00325"></a><a class="code" href="classDefendOrder.html#p0">00325</a>      <a class="code" href="classTime.html">Time</a> <a class="code" href="classDefendOrder.html#p0">mEnd</a>;   
00326 
00327 <span class="keyword">public</span>:
00328      <a class="code" href="classDefendOrder.html#a1">DefendOrder</a>() {}
00329      <a class="code" href="classDefendOrder.html#a1">DefendOrder</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d);
00330 
00331      <span class="keywordtype">void</span> <a class="code" href="classDefendOrder.html#a2">extract</a>(<a class="code" href="classBuffer.html">Buffer</a>&amp; b) <span class="keyword">const</span>;
00332      <span class="keywordtype">void</span> <a class="code" href="classDefendOrder.html#a3">modify</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d);
00333      <span class="keywordtype">void</span> <a class="code" href="classDefendOrder.html#a4">reset</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d);
00334 
<a name="l00341"></a><a class="code" href="classDefendOrder.html#a5">00341</a>      <span class="keywordtype">bool</span> <a class="code" href="classDefendOrder.html#a5">isActive</a>(<a class="code" href="classTime.html">Time</a> t) { <a class="code" href="classOrder.html#p0">mCarriedOut</a> = (t &gt; <a class="code" href="classDefendOrder.html#p0">mEnd</a>); <span class="keywordflow">return</span> <a class="code" href="classActivity.html#p0">mActive</a> = (t &gt; <a class="code" href="classActivity.html#p1">mStart</a> &amp;&amp; t &lt;= <a class="code" href="classDefendOrder.html#p0">mEnd</a>); }
00342      <span class="keywordtype">void</span> <a class="code" href="classDefendOrder.html#a6">perform</a>(<a class="code" href="classElement.html">Element</a>* e, <span class="keywordtype">double</span> fraction = 1.0);
<a name="l00343"></a><a class="code" href="classDefendOrder.html#a7">00343</a>      <span class="keywordtype">double</span> <a class="code" href="classDefendOrder.html#a7">combatFactor</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> 1; }
00344 };
00345 
00346 
<a name="l00353"></a><a class="code" href="classAmbushOrder.html">00353</a> <span class="keyword">class </span><a class="code" href="classAmbushOrder.html">AmbushOrder</a> : <span class="keyword">public</span> <a class="code" href="classOrder.html">Order</a> {
00354 <span class="keyword">protected</span>:
<a name="l00355"></a><a class="code" href="classAmbushOrder.html#p0">00355</a>      <span class="keywordtype">int</span> <a class="code" href="classAmbushOrder.html#p0">mState</a>;          
00356 
<a name="l00362"></a><a class="code" href="classAmbushOrder.html#p1">00362</a>      <span class="keywordtype">bool</span> <a class="code" href="classAmbushOrder.html#p1">mTimeForAmbush</a>; 
00363 
<a name="l00369"></a><a class="code" href="classAmbushOrder.html#p2">00369</a>      <span class="keywordtype">bool</span> <a class="code" href="classAmbushOrder.html#p2">mOneAmbushPerformed</a>;
00370 
<a name="l00371"></a><a class="code" href="classAmbushOrder.html#p3">00371</a>      <a class="code" href="classTime.html">Time</a> <a class="code" href="classAmbushOrder.html#p3">mEnd</a>;           
<a name="l00372"></a><a class="code" href="classAmbushOrder.html#p4">00372</a>      <a class="code" href="classTime.html">Time</a> <a class="code" href="classAmbushOrder.html#p4">mStartAmbush</a>;   
<a name="l00373"></a><a class="code" href="classAmbushOrder.html#p5">00373</a>      <a class="code" href="classTime.html">Time</a> <a class="code" href="classAmbushOrder.html#p5">mEndAmbush</a>;     
00374 
00375 <span class="keyword">public</span>:
<a name="l00379"></a><a class="code" href="classAmbushOrder.html#w2">00379</a>      <span class="keyword">enum</span> <a class="code" href="classAmbushOrder.html#w2">eAmbushState</a> {eHide, eAmbush};
00380 
00381      <a class="code" href="classAmbushOrder.html#a0">AmbushOrder</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d);
00382 
00383      <span class="keywordtype">void</span> <a class="code" href="classAmbushOrder.html#a1">extract</a>(<a class="code" href="classBuffer.html">Buffer</a>&amp; b) <span class="keyword">const</span>;
00384      <span class="keywordtype">void</span> <a class="code" href="classAmbushOrder.html#a2">modify</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d);
00385      <span class="keywordtype">void</span> <a class="code" href="classAmbushOrder.html#a3">reset</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d);
00386 
00387      <span class="keywordtype">bool</span> <a class="code" href="classAmbushOrder.html#a4">isActive</a>(<a class="code" href="classTime.html">Time</a> t);
00388 
<a name="l00394"></a><a class="code" href="classAmbushOrder.html#a5">00394</a>      <span class="keywordtype">bool</span> <a class="code" href="classAmbushOrder.html#a5">oneAmbush</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (<a class="code" href="classAmbushOrder.html#p4">mStartAmbush</a> == <a class="code" href="classAmbushOrder.html#p5">mEndAmbush</a>); }
00395 
00396      <span class="keywordtype">void</span> <a class="code" href="classAmbushOrder.html#a6">perform</a>(<a class="code" href="classElement.html">Element</a>* e, <span class="keywordtype">double</span> fraction = 1.0);
00397 
<a name="l00403"></a><a class="code" href="classAmbushOrder.html#a7">00403</a>      <span class="keywordtype">double</span> <a class="code" href="classAmbushOrder.html#a7">combatFactor</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> 1; }
00404 
<a name="l00410"></a><a class="code" href="classAmbushOrder.html#a8">00410</a>      <span class="keywordtype">int</span> <a class="code" href="classAmbushOrder.html#a8">state</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (<a class="code" href="classAmbushOrder.html#p1">mTimeForAmbush</a> ? eAmbush : eHide); }
00411 };
00412 
00413 
00414 
<a name="l00421"></a><a class="code" href="classGoToOrder.html">00421</a> <span class="keyword">class </span><a class="code" href="classGoToOrder.html">GoToOrder</a> : <span class="keyword">public</span> <a class="code" href="classOrder.html">Order</a> {
00422 <span class="keyword">public</span>:
00423      <a class="code" href="classGoToOrder.html#a0">GoToOrder</a>(<span class="keyword">const</span> <a class="code" href="classShape.html">Shape</a>&amp; <a class="code" href="classOrder.html#a4">location</a>);
<a name="l00429"></a><a class="code" href="classGoToOrder.html#a1">00429</a>      <a class="code" href="classGoToOrder.html#a0">GoToOrder</a>(<span class="keyword">const</span> <a class="code" href="classDataObject.html">DataObject</a>&amp; d) : <a class="code" href="classOrder.html">Order</a>(d) {}
00430 
00431      <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classGoToOrder.html#a2">perform</a>(<a class="code" href="classElement.html">Element</a>* e, <span class="keywordtype">double</span> fraction = 1.0);
<a name="l00432"></a><a class="code" href="classGoToOrder.html#a3">00432</a>      <span class="keywordtype">double</span> <a class="code" href="classGoToOrder.html#a3">combatFactor</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> 0.1; }
00433 };
00434 
00435 
<a name="l00442"></a><a class="code" href="classRetreatOrder.html">00442</a> <span class="keyword">class </span><a class="code" href="classRetreatOrder.html">RetreatOrder</a> : <span class="keyword">public</span> <a class="code" href="classGoToOrder.html">GoToOrder</a> {
00443 <span class="keyword">private</span>:
<a name="l00444"></a><a class="code" href="classRetreatOrder.html#r0">00444</a>      <span class="keywordtype">int</span> <a class="code" href="classRetreatOrder.html#r0">mState</a>;   
00445 
00446 <span class="keyword">public</span>:
<a name="l00454"></a><a class="code" href="classRetreatOrder.html#w2">00454</a>      <span class="keyword">enum</span> <a class="code" href="classRetreatOrder.html#w2">eRetreatState</a> {eRetreat, eReturn};
00455 
<a name="l00461"></a><a class="code" href="classRetreatOrder.html#a0">00461</a>      <a class="code" href="classRetreatOrder.html#a0">RetreatOrder</a>(<span class="keyword">const</span> <a class="code" href="classShape.html">Shape</a>&amp; location) : <a class="code" href="classGoToOrder.html">GoToOrder</a>(<a class="code" href="classOrder.html#a4">location</a>), <a class="code" href="classRetreatOrder.html#r0">mState</a>(eRetreat) {}
00462      <span class="keywordtype">void</span> <a class="code" href="classRetreatOrder.html#a1">perform</a>(<a class="code" href="classElement.html">Element</a>* e, <span class="keywordtype">double</span> fraction = 1.0);
00463 
<a name="l00469"></a><a class="code" href="classRetreatOrder.html#a2">00469</a>      <span class="keywordtype">int</span> <a class="code" href="classRetreatOrder.html#a2">state</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classRetreatOrder.html#r0">mState</a>; }
00470      <a class="code" href="classUnit.html">Unit</a>* findClosestParentWithSameFaction(<a class="code" href="classUnit.html">Unit</a>&amp; u);
00471 };
00472 
00473 
<a name="l00481"></a><a class="code" href="classSearchOrder.html">00481</a> <span class="keyword">class </span><a class="code" href="classSearchOrder.html">SearchOrder</a> : <span class="keyword">public</span> <a class="code" href="classOrder.html">Order</a> {
00482 <span class="keyword">protected</span>:
<a name="l00483"></a><a class="code" href="classSearchOrder.html#p0">00483</a>      <a class="code" href="classTime.html">Time</a> <a class="code" href="classSearchOrder.html#p0">mEnd</a>;   
00484 <span class="keyword">public</span>:
<a name="l00490"></a><a class="code" href="classSearchOrder.html#a0">00490</a>      <a class="code" href="classSearchOrder.html#a0">SearchOrder</a>(<a class="code" href="classTime.html">Time</a> end) : <a class="code" href="classSearchOrder.html#p0">mEnd</a>(end) {}
00491 
<a name="l00498"></a><a class="code" href="classSearchOrder.html#a1">00498</a>      <span class="keywordtype">bool</span> <a class="code" href="classSearchOrder.html#a1">isActive</a>(<a class="code" href="classTime.html">Time</a> t) { <a class="code" href="classOrder.html#p0">mCarriedOut</a> = (t &gt; <a class="code" href="classSearchOrder.html#p0">mEnd</a>); <span class="keywordflow">return</span> <a class="code" href="classActivity.html#p0">mActive</a> = (t &gt; <a class="code" href="classActivity.html#p1">mStart</a> &amp;&amp; t &lt;= <a class="code" href="classSearchOrder.html#p0">mEnd</a>); }
00499 
<a name="l00500"></a><a class="code" href="classSearchOrder.html#a2">00500</a>      <span class="keywordtype">void</span> <a class="code" href="classSearchOrder.html#a2">perform</a>(<a class="code" href="classElement.html">Element</a>* e, <span class="keywordtype">double</span> fraction = 1.0) {}
<a name="l00501"></a><a class="code" href="classSearchOrder.html#a3">00501</a>      <span class="keywordtype">double</span> <a class="code" href="classSearchOrder.html#a3">combatFactor</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> 1.0; }
00502 };
00503 
00504 <span class="preprocessor">#endif  // APPROXSIM_ACTIVITY_H</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jan 31 14:27:32 2007 for Approxsim by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>
